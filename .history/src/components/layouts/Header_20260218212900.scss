@import '../../styles/variables';
@import '../../styles/animations';

.main-header {
  position: fixed;
  top: 0; left: 0; width: 100%;
  z-index: 1000;
  padding: $space-10 0;
  transition: all $duration-base $ease-default;
  pointer-events: none; // Laisse passer la souris sur le site

  &.scrolled {
    padding: $space-4 0;
    background: rgba($void, 0.95);
    backdrop-filter: blur(15px);
    .header-border-bottom { opacity: 0.5; }
  }

  .header-container {
    max-width: 1440px;
    margin: 0 auto;
    padding: 0 $container-pad;
    display: flex; align-items: center; justify-content: space-between;
    pointer-events: auto; // Réactive la souris pour les éléments du header
  }

  .header-logo {
    text-decoration: none;
    z-index: 1100;
    .logo-title {
      font-family: $font-title; font-size: 2rem; color: $white; letter-spacing: 0.15em;
      span { color: transparent; -webkit-text-stroke: 1px $violet; }
      @media (max-width: $bp-md) { font-size: 1.4rem; }
    }
    .logo-tagline { font-family: $font-mono; font-size: 0.65rem; color: $acid; letter-spacing: 0.4em; }
  }

  .header-nav {
    display: flex; gap: $space-4;
    background: rgba($surface, 0.6);
    padding: $space-2; border-radius: 50px; border: 1px solid rgba($border, 0.3);
    @media (max-width: 1100px) { display: none; } // Cache la nav desktop

    .nav-item {
      padding: $space-3 $space-8; display: flex; flex-direction: column; align-items: center;
      border-radius: 40px; transition: all $transition; text-decoration: none;
      .label { font-family: $font-mono; font-size: 0.85rem; color: $fog; }
      .sub { font-family: $font-body; font-size: 0.65rem; color: $phantom; }
      &:hover, &.active { background: rgba($violet, 0.15); .label { color: $white; } }
      &.active .label { color: $acid; text-shadow: $glow-text-acid; }
    }
  }

  .header-actions { display: flex; align-items: center; gap: $space-4; z-index: 1100; }

  .cta-interrogative.desktop-only {
    display: flex; align-items: center; gap: $space-4;
    padding: $space-2 $space-2 $space-2 $space-6;
    border: 1px solid $violet; border-radius: 50px;
    color: $white; font-family: $font-mono; text-decoration: none;
    @media (max-width: 1200px) { .cta-text { display: none; } }
    @media (max-width: 1100px) { display: none; }

    .cta-icon {
      width: 38px; height: 38px; background: $violet; border-radius: 50%;
      display: flex; align-items: center; justify-content: center; box-shadow: $glow-violet;
    }
  }

  // --- BURGER STYLE ---
  .header-burger {
    display: none; flex-direction: column; gap: 6px;
    background: none; border: none; cursor: pointer; padding: 10px;
    @media (max-width: 1100px) { display: flex; }

    .line {
      width: 28px; height: 2px; background: $white; transition: 0.3s ease;
      &:nth-child(2) { width: 20px; align-self: flex-end; }
    }

    &.active {
      .line:nth-child(1) { transform: translateY(8px) rotate(45deg); background: $acid; }
      .line:nth-child(2) { opacity: 0; }
      .line:nth-child(3) { transform: translateY(-8px) rotate(-45deg); background: $acid; width: 28px; }
    }
  }

  // --- MOBILE DRAWER ---
  .mobile-drawer {
    position: fixed; top: 0; right: 0; width: 100%; height: 100vh;
    background: rgba($void, 0.98); backdrop-filter: blur(10px);
    transform: translateX(100%); transition: transform 0.5s $ease-default;
    pointer-events: auto; display: flex; align-items: center; justify-content: center;
    z-index: 1050;

    &.open { transform: translateX(0); }

    .drawer-content {
      display: flex; flex-direction: column; gap: $space-10; text-align: center;
      
      .drawer-link {
        text-decoration: none; display: flex; flex-direction: column;
        .label { font-family: $font-title; font-size: 2.5rem; color: $white; letter-spacing: 0.1em; }
        .sub { font-family: $font-body; font-size: 1rem; color: $violet; font-style: italic; }
        
        &.diag-special .label { color: $acid; text-shadow: $glow-text-acid; }
      }
    }
  }

  .header-border-bottom {
    position: absolute; bottom: 0; width: 100%; height: 1px;
    background: linear-gradient(90deg, transparent, $violet, transparent); opacity: 0.2;
  }
}